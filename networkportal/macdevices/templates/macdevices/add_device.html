{% extends 'macdevices/base.html' %}
{% block content %}

  <h2>Add New Device</h2>
  <form id="add-device-form">
    {% csrf_token %}
    <div class="form-group">
      <label for="name">Name:</label>
      <input type="text" class="form-control" id="name" name="name">
    </div>
    <div class="form-group">
      <label for="mac_address">MAC Address:</label>
      <input type="text" class="form-control" id="mac_address" name="mac_address">
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>

  <div id="messages"></div>

  <script>
    $(document).ready(function() {
      $("#add-device-form").submit(function(event) {
        event.preventDefault();

        var name = $("#name").val();
        var mac_address = $("#mac_address").val();
        

        $.ajax({
          url: "{% url 'add_device' %}",
          type: "POST",
          data: {
            csrfmiddlewaretoken: "{{ csrf_token }}",
            name: name,
            mac_address: mac_address
          },
          success: function(response) {
            $("#messages").html("<div class='alert alert-success'>" + response.message + "</div>");
          },
          error: function(response) {
            $("#messages").html("<div class='alert alert-danger'>" + response.responseJSON.message + "</div>");
          }
        });
      });
    });
  </script>
{% endblock %}

